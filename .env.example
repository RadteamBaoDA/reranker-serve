# Environment Configuration for Reranker Service
# Copy this file to .env and modify as needed

# =============================================================================
# Server Configuration
# =============================================================================
RERANKER_HOST=0.0.0.0
RERANKER_PORT=8000
RERANKER_WORKERS=1
RERANKER_RELOAD=false

# =============================================================================
# Model Configuration
# =============================================================================
# Model name or HuggingFace model ID
# Supported models:
#   - BAAI/bge-reranker-v2-m3 (multilingual, recommended)
#   - BAAI/bge-reranker-large (English)
#   - BAAI/bge-reranker-base (smaller, faster)
#   - Qwen3-reranker models
RERANKER_MODEL_NAME=BAAI/bge-reranker-v2-m3

# Local path to load model from disk (optional)
# If set, will load from this path instead of downloading
# RERANKER_MODEL_PATH=/path/to/local/model

# Directory to cache downloaded models
RERANKER_MODEL_CACHE_DIR=./models

# Enable offline mode (no internet access, requires local model)
RERANKER_USE_OFFLINE_MODE=false

# =============================================================================
# Inference Configuration
# =============================================================================
# Maximum sequence length
RERANKER_MAX_LENGTH=512

# Batch size for inference
RERANKER_BATCH_SIZE=32

# Normalize scores to 0-1 range
RERANKER_NORMALIZE_SCORES=true

# =============================================================================
# Device Configuration
# =============================================================================
# Device to use: cuda, mps, cpu, or leave empty for auto-detect
# RERANKER_DEVICE=

# Use FP16 precision (faster on CUDA, may cause issues on MPS)
RERANKER_USE_FP16=true

# Fallback to CPU if MPS operation fails
RERANKER_MPS_FALLBACK_TO_CPU=true

# =============================================================================
# API Configuration
# =============================================================================
# API key for authentication (optional)
# If set, all requests must include Authorization: Bearer <key>
# RERANKER_API_KEY=your-secret-key

# Enable CORS
RERANKER_ENABLE_CORS=true

# Allowed CORS origins (comma-separated, or * for all)
RERANKER_CORS_ORIGINS=*

# =============================================================================
# Load Balancer Configuration
# =============================================================================
# Enable load balancer mode (route requests to multiple backends)
RERANKER_LOAD_BALANCER_ENABLED=false

# Path to load balancer YAML configuration file
RERANKER_CONFIG_PATH=./reranker_config.yaml

# =============================================================================
# HTTP Client / Proxy Configuration
# =============================================================================
# Trust environment variables for proxy settings (HTTP_PROXY, HTTPS_PROXY, NO_PROXY)
# Set to false to ignore proxy and make direct connections (recommended for internal services)
# Set to true to use system proxy settings
RERANKER_TRUST_ENV=false

# =============================================================================
# Logging (structlog)
# =============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
RERANKER_LOG_LEVEL=INFO

# Output logs in JSON format (recommended for production/log aggregation)
RERANKER_JSON_LOGS=false
